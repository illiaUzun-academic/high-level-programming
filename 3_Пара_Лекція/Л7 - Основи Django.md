# Основи Django

1. **Вступ**
   - Що таке Django і для чого він призначений.
   - Переваги та особливості використання Django.
   - Огляд архітектури Django.
2. **Встановлення та налаштування**
   - Процес встановлення Django.
   - Створення першого проекту за допомогою django-admin.
3. **Структура проекту в Django**
   - Огляд основних компонентів: проект і додаток.
   - Що таке `settings.py`, `urls.py`, `wsgi.py` та інші компоненти.
   - Створення нового додатка за допомогою команди `startapp`.
4. **Моделі**
   - Поняття моделі в Django та її роль.
   - Створення простої моделі.
   - Міграції: що це таке і як їх використовувати.
   - Огляд Django ORM та його можливостей.
5. **Вигляди (Views)**
   - Що таке вигляд в контексті Django.
   - Створення функціонального та класового вигляду.
   - Зв'язування URL-адрес з виглядами за допомогою `urls.py`.
6. **Шаблони (Templates)**
   - Основи роботи з шаблонами в Django.
   - Створення простого шаблону.
   - Використання змінних, тегів та фільтрів у шаблонах.
   - Наслідування шаблонів.
7. **Адмін-панель Django**
   - Що таке адмін-панель і як її налаштувати.
   - Реєстрація моделей в адмін-панелі.
   - Основні можливості та налаштування адміністративного інтерфейсу.



### **Вступ**

#### Що таке Django і для чого він призначений.

Django — це високорівневий веб-фреймворк, написаний на мові програмування Python. Він призначений для швидкої розробки безпечних і обслуговуваних веб-додатків. Django слідує принципу "DRY" (Don't Repeat Yourself), що означає, що програмісти повинні писати якнайменше коду для реалізації функціоналу.

#### Переваги та особливості використання Django.

- **"Батарейки в комплекті"**: Django містить у собі багато готових до використання модулів і утиліт, що дозволяє розробникам не винаходити колесо заново.
- **Безпека**: Django активно допомагає уникнути поширених помилок, пов'язаних з безпекою, таких як SQL-ін'єкції, міжсайтовий скриптинг і т.д.
- **ORM (Object-Relational Mapping)**: Django має вбудований ORM, який дозволяє працювати з базами даних, використовуючи об'єктно-орієнтований підхід.
- **Адмін-панель**: Готова до використання адміністративна панель для управління контентом сайту.
- **Масштабованість**: Django може впоратися як з маленькими, так і з великими проектами.

#### Огляд архітектури Django.

Django використовує архітектурний патерн "Модель-Вигляд-Контролер" (MVC), але в контексті Django його часто називають "Модель-Вигляд-Шаблон" (MVT).

- **Модель (Model)**: Відповідає за дані, їх зберігання та бізнес-логіку. Вона представляє собою структуру бази даних, включаючи таблиці, відносини між ними, запити до бази даних тощо.
- **Вигляд (View)**: Відповідає за обробку запитів від користувачів і відправку відповідей. Вигляди визначають, які дані будуть відображатися і в якому вигляді.
- **Шаблон (Template)**: Це частина, яка відповідає за представлення даних користувачеві. Шаблони в Django - це HTML-файли, які містять спеціальні теги та фільтри, що дозволяють динамічно генерувати вміст.



### **Встановлення та налаштування**

#### Процес встановлення Django.

Для встановлення Django нам потрібно використовувати пакетний менеджер Python - pip. Якщо у вас вже встановлений Python, то pip також має бути встановлений.

1. **Встановлення Django**:

   Відкрийте термінал або командний рядок і введіть наступну команду:

   ```bash
   pip install django
   ```

   Ця команда встановить останню стабільну версію Django. Якщо ви хочете встановити конкретну версію, вкажіть її після назви пакета:

   ```bash
   pip install django==3.2
   ```

2. **Перевірка встановленої версії**:

   Після встановлення Django можна перевірити його версію за допомогою команди:

   ```bash
   django-admin --version
   ```

#### Створення першого проекту за допомогою django-admin.

1. **Створення нового проекту**:

   Щоб створити новий проект в Django, використовуйте команду `django-admin startproject` із назвою вашого проекту. Наприклад:

   ```bash
   django-admin startproject myproject
   ```

   Ця команда створить нову директорію з ім'ям `myproject`, яка міститиме всю необхідну структуру проекту Django.

2. **Запуск розробницького сервера**:

   Перейдіть до директорії вашого проекту:

   ```bash
   cd myproject
   ```

   І запустіть розробницький сервер за допомогою команди:

   ```bash
   python manage.py runserver
   ```

   Після цього ви зможете відкрити ваш веб-браузер і перейти за адресою `http://127.0.0.1:8000/` для перегляду стартової сторінки Django.



### **Структура проекту в Django**

#### Огляд основних компонентів: проект і додаток.

Кожен Django-проект складається з одного або декількох додатків. Додаток - це набір пов'язаних функцій, який може бути використаний в одному або декількох проектах.

- **Проект**: Це повний веб-сайт, який ви створюєте. Він містить конфігураційні налаштування для цього веб-сайту.

- **Додаток**: Це підсистема, яка реалізує певний функціонал. Наприклад, блог, форум, новинний портал тощо.

#### Що таке `settings.py`, `urls.py`, `wsgi.py` та інші компоненти.

- **`settings.py`**: Файл з налаштуваннями для вашого проекту. Тут ви можете змінювати базу даних, часовий пояс, мову і багато інших параметрів.

- **`urls.py`**: Файл, де визначаються URL-шляхи для вашого проекту. За допомогою нього ви вказуєте, який вигляд (view) буде обробляти певний URL.

- **`wsgi.py`**: Файл для запуску вашого проекту як WSGI-додатка. Це стандартний інтерфейс між веб-серверами та веб-додатками або фреймворками для Python.

- **`manage.py`**: Утиліта командного рядка, яка допомагає керувати вашим проектом. За її допомогою ви можете створювати нові додатки, виконувати міграції бази даних тощо.

#### Створення нового додатка за допомогою команди `startapp`.

Для створення нового додатка використовуйте команду `startapp` разом з `manage.py`. Наприклад, щоб створити новий додаток з назвою "blog", виконайте наступну команду:

```bash
python manage.py startapp blog
```

Після виконання цієї команди у вашому проекті з'явиться нова директорія з ім'ям "blog", яка міститиме структуру додатка.



### **Моделі**

#### Поняття моделі в Django та її роль.

Модель в Django - це клас, який визначає структуру даних для конкретного об'єкта. Вона представляє собою абстракцію бази даних, де кожен атрибут класу відповідає полю в таблиці бази даних.

Основна роль моделі - забезпечити інтерфейс для роботи з даними: створення, зчитування, оновлення та видалення записів (CRUD-операції).

#### Створення простої моделі.

Припустимо, ми хочемо створити модель для блогу. Ось приклад простої моделі "Post":

```python
from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    pub_date = models.DateTimeField('date published')
```

Тут ми визначили модель з ім'ям "Post" із трьома полями: заголовок, вміст та дата публікації.

#### Міграції: що це таке і як їх використовувати.

Міграції - це механізм, який дозволяє змінювати структуру бази даних без втрати даних. Кожна міграція відображає зміни, зроблені в моделях.

1. **Створення міграцій**: Після того, як ви змінили модель, ви можете створити міграцію за допомогою команди:

   ```bash
   python manage.py makemigrations
   ```

2. **Застосування міграцій**: Щоб застосувати зміни до бази даних, використовуйте:

   ```bash
   python manage.py migrate
   ```

#### Огляд Django ORM та його можливостей.

Django ORM (Object-Relational Mapping) - це інтерфейс, який дозволяє працювати з базами даних, як із звичайними Python-об'єктами.

Основні можливості Django ORM:

1. **Запити до бази даних**: Ви можете виконувати запити до бази даних без написання SQL-коду. Наприклад:

   ```python
   posts = Post.objects.filter(title__contains='django')
   ```

2. **Відношення між моделями**: Django ORM підтримує різні типи відношень: ForeignKey (зовнішній ключ), OneToOneField (один до одного) та ManyToManyField (багато до багатьох).

3. **Агрегація та анотація**: Ви можете виконувати складні операції з даними, такі як підрахунок, сума, середнє значення тощо.

4. **Застосування змін до моделей**: За допомогою міграцій ви можете легко змінювати структуру бази даних.



### **Вигляди (Views)**

#### Що таке вигляд в контексті Django.

Вигляд (View) в Django - це місце, де визначається логіка обробки запитів від користувача. Він приймає вхідний веб-запит і повертає веб-відповідь. Ця відповідь може бути HTML-сторінкою, перенаправленням, 404 помилкою, XML-документом, зображенням та ін.

#### Створення функціонального та класового вигляду.

1. **Функціональний вигляд**:

   Це просто функція Python, яка приймає об'єкт запиту (request) і повертає об'єкт відповіді (response).

   ```python
   from django.http import HttpResponse

   def hello(request):
       return HttpResponse("Привіт, світе!")
   ```

2. **Класовий вигляд**:

   Django також підтримує вигляди на основі класів, які дозволяють структурувати ваш код більш модульно та повторно використовувати його.

   ```python
   from django.views import View
   from django.http import HttpResponse
   
   class HelloView(View):
       def get(self, request):
           return HttpResponse("Привіт, світе!")
   ```

#### Зв'язування URL-адрес з виглядами за допомогою `urls.py`.

Щоб вигляд міг обробляти веб-запити, його потрібно зв'язати з URL-адресою. Це робиться в `urls.py`.

1. **Для функціонального вигляду**:

   ```python
   from django.urls import path
   from . import views

   urlpatterns = [
       path('hello/', views.hello, name='hello'),
   ]
   ```

2. **Для класового вигляду**:

   ```python
   from django.urls import path
   from .views import HelloView
   
   urlpatterns = [
       path('hello/', HelloView.as_view(), name='hello_class'),
   ]
   ```



### **Шаблони (Templates)**

#### Основи роботи з шаблонами в Django.

Шаблони в Django - це спосіб представлення даних у вигляді, який може бути легко перетворений у текст, зокрема HTML. Шаблонний двигун Django дозволяє вставляти дані у документ і використовувати деяку логіку, таку як цикли та умовні оператори.

#### Створення простого шаблону.

1. Спочатку створіть папку `templates` у вашому додатку.
2. У цій папці створіть файл, наприклад `index.html`.

   ```html
   <!DOCTYPE html>
   <html>
   <head>
       <title>Мій сайт</title>
   </head>
   <body>
       <h1>Вітаємо на нашому сайті!</h1>
       <p>Це простий шаблон Django.</p>
   </body>
   </html>
   ```

#### Використання змінних, тегів та фільтрів у шаблонах.

1. **Змінні**: Ви можете вставляти змінні з контексту шаблону, використовуючи `{{ variable_name }}`.

   ```html
   <p>Привіт, {{ user_name }}!</p>
   ```

2. **Теги**: Теги дозволяють використовувати логіку в шаблонах.

   ```html
   {% if user.is_authenticated %}
       <p>Вітаємо, {{ user.username }}!</p>
   {% else %}
       <p>Будь ласка, увійдіть у систему.</p>
   {% endif %}
   ```

3. **Фільтри**: Фільтри дозволяють змінювати формат даних.

   ```html
   <p>Опубліковано: {{ post.date|date:"d M Y" }}</p>
   ```

#### Наслідування шаблонів.

Щоб уникнути повторення коду, ви можете створити "базовий" шаблон і зробити інші шаблони, які наслідують його.

1. **Базовий шаблон** (`base.html`):

   ```html
   <!DOCTYPE html>
   <html>
   <head>
       <title>{% block title %}Мій сайт{% endblock %}</title>
   </head>
   <body>
       <div id="content">
           {% block content %}
           {% endblock %}
       </div>
   </body>
   </html>
   ```

2. **Дочірній шаблон**:

   ```html
   {% extends "base.html" %}
   
   {% block title %}Головна сторінка{% endblock %}
   
   {% block content %}
       <h1>Вітаємо на головній сторінці!</h1>
   {% endblock %}
   ```



### **Адмін-панель Django**

#### Що таке адмін-панель і як її налаштувати.

Адмін-панель Django - це вбудований інструмент, який дозволяє легко керувати контентом вашого веб-сайту. Вона надає інтерфейс для роботи з моделями, дозволяючи вам додавати, редагувати та видаляти записи в базі даних без необхідності писати код.

Для доступу до адмін-панелі перейдіть за адресою `/admin/` вашого веб-сайту. Перш ніж ви зможете увійти, вам потрібно створити суперкористувача:

```bash
python manage.py createsuperuser
```

Після цього введіть ім'я користувача, електронну пошту та пароль.

#### Реєстрація моделей в адмін-панелі.

Щоб ваші моделі стали доступними в адмін-панелі, вам потрібно їх зареєструвати. Для цього:

1. Відкрийте файл `admin.py` у вашому додатку.
2. Імпортуйте вашу модель.
3. Використовуйте `admin.site.register()` для реєстрації моделі.

```python
from django.contrib import admin
from .models import YourModel

admin.site.register(YourModel)
```

#### Основні можливості та налаштування адміністративного інтерфейсу.

Адмін-панель Django має багато налаштувань та можливостей:

1. **Персоналізація відображення моделі**: Ви можете налаштувати, які поля відображатимуться, їх порядок та інше.

   ```python
   @admin.register(YourModel)
   class YourModelAdmin(admin.ModelAdmin):
       list_display = ('field1', 'field2')
       search_fields = ('field1',)
       list_filter = ('field2',)
   ```

2. **Використання інлайнів**: Це дозволяє вам редагувати моделі прямо з адмін-панелі іншої моделі.

3. **Налаштування форм**: Ви можете визначити власні форми для редагування моделей в адмін-панелі.

4. **Додавання дій**: Ви можете додавати власні дії, які будуть доступні для вибраних записів на сторінці списку.



## Структура проекту Django після повторення матеріалів лекції "Основи Django"

```
myproject/
│
├── myproject/               # Головна директорія проекту
│   ├── __init__.py
│   ├── settings.py         # Налаштування проекту
│   ├── urls.py             # Головний маршрутизатор URL
│   └── wsgi.py
│
├── myapp/                  # Директорія додатку
│   ├── migrations/         # Директорія міграцій
│   │   ├── __init__.py
│   │   └── 0001_initial.py
│   ├── templates/          # Директорія шаблонів
│   │   └── mytemplate.html
│   ├── __init__.py
│   ├── admin.py            # Налаштування адмін-панелі для моделей
│   ├── apps.py
│   ├── models.py           # Оголошення моделей
│   ├── tests.py
│   ├── views.py            # Функціональні та класові вигляди
│   └── urls.py             # Маршрутизатор URL для додатку
│
├── manage.py               # Утиліта командного рядка для керування проектом
└── db.sqlite3              # Файл бази даних SQLite (якщо використовується SQLite)
```

**Опис основних компонентів:**

- `myproject/`: Головна директорія проекту, яка містить налаштування проекту.
  
- `myapp/`: Директорія додатку, яка містить всі компоненти, пов'язані з цим додатком (моделі, вигляди, шаблони тощо).

- `migrations/`: Директорія, яка містить міграції бази даних для додатку.

- `templates/`: Директорія для шаблонів додатку.

- `models.py`: Файл, де оголошуються моделі для додатку.

- `views.py`: Файл, де оголошуються вигляди (функціональні та класові) для додатку.

- `urls.py`: Файл, де визначаються маршрути URL для додатку.

- `admin.py`: Файл, де налаштовується адмін-панель для моделей додатку.

- `manage.py`: Утиліта командного рядка, яка допомагає керувати проектом (запуск сервера, створення міграцій тощо).

